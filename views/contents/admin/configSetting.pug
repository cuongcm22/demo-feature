//- doctype html
//- head
//-   meta(charset='UTF-8')
//-   meta(name='viewport' content='width=device-width, initial-scale=1.0')
//-   title Config Settings
//-   link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css' rel='stylesheet')
//- .container.mt-5
//-   h2 Config Settings
//-   form#configForm
//-     .mb-3
//-       label.form-label(for='depreciationRate') Depreciation Rate
//-       input#depreciationRate.form-control(type='number' step='0.01' required='')
//-     .mb-3
//-       label.form-label(for='height') Image Height
//-       input#height.form-control(type='number' required='')
//-     .mb-3
//-       label.form-label(for='width') Image Width
//-       input#width.form-control(type='number' required='')
//-     button.btn.btn-primary(type='submit') Save Config
//-   #message.mt-3
//- script(src='https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js')
//- script.
//-   document.getElementById('configForm').addEventListener('submit', async function(e) {
//-   e.preventDefault();
//-   const depreciationRate = document.getElementById('depreciationRate').value;
//-   const height = document.getElementById('height').value;
//-   const width = document.getElementById('width').value;
//-   try {
//-   const response = await axios.post('/api/config', {
//-   depreciationRate: parseFloat(depreciationRate),
//-   settingSizeImg: {
//-   height: parseInt(height),
//-   width: parseInt(width)
//-   }
//-   });
//-   document.getElementById('message').innerText = 'Config saved successfully!';
//-   document.getElementById('message').classList.add('alert', 'alert-success');
//-   } catch (error) {
//-   document.getElementById('message').innerText = 'Failed to save config!';
//-   document.getElementById('message').classList.add('alert', 'alert-danger');
//-   }
//-   });

doctype html
head
  meta(charset='UTF-8')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  title #{title}
  link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css' rel='stylesheet')
  style.
    /* Custom CSS for sticky sidebar */
    html,
    body {
    height: 100%;
    }
    .sidebar {
    position: -webkit-sticky;
    position: sticky;
    top: 0;
    height: 100vh;
    overflow-y: auto;
    }
    .nav-group .nav-link:hover {
    background: rgb(69 78 87);
    }
    .rotate-on-hover {
      transition: transform 1s ease-in-out;
    }
    .btn-setting:hover .rotate-on-hover {
      transform: rotate(90deg);
    }

span.btn-setting.mt-2.btn(type='button' data-bs-toggle='offcanvas' data-bs-target='#offcanvasExample' aria-controls='offcanvasExample') 
  svg.bi.bi-gear.rotate-on-hover(xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='blue' viewbox='0 0 16 16')
    path(d='M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0')
    path(d='M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z')
  
#offcanvasExample.offcanvas.offcanvas-start(tabindex='-1' aria-labelledby='offcanvasExampleLabel')
  .offcanvas-header.bg-dark.text-white
    h5#offcanvasExampleLabel.offcanvas-title
      | Chức năng
    button.btn-close.text-reset(type='button' data-bs-dismiss='offcanvas' aria-label='Close')
  .offcanvas-body.bg-dark.text-white
    ul.nav.nav-pills.flex-column.mb-auto.nav-group
      li.nav-item
        a.nav-link.text-white(href='/' aria-current='page') Home
        a.nav-link.text-white(href='/user/manage' aria-current='page') Quản lý người dùng
        a.nav-link.text-white(href='/user/config' aria-current='page') Cài đặt thiết lập trang
      //- li.nav-item
      //-   a.nav-link.text-white(href='/dashboard' aria-current='page') Dashboard
      //- li.nav-item
      //-   a.nav-link.text-white(href='#') Permissions &amp; Accounts
.container.mt-5
  h2 Config Settings
  form#configForm
    .mb-3
      label.form-label(for='depreciationRate') Tỷ lệ khấu hao tài sản (phần trăm)
      input#depreciationRate.form-control(type='number' step='0' required='' value=configSetting.depreciationRate)
    .mb-3
      label.form-label(for='heightImg') Chiều cao ảnh
      input#heightImg.form-control(type='number' required='' value=configSetting.settingSizeImg.height)
    .mb-3
      label.form-label(for='widthImg') Chiều rộng ảnh
      input#widthImg.form-control(type='number' required='' value=configSetting.settingSizeImg.width)
    .mb-3
      label.form-label(for='heightVideo') Chiều cao ảnh
      input#heightVideo.form-control(type='number' required='' value=configSetting.settingSizeImg.height)
    .mb-3
      label.form-label(for='widthVideo') Chiều rộng ảnh
      input#widthVideo.form-control(type='number' required='' value=configSetting.settingSizeImg.width)
    
    button.btn.btn-primary.w-100(type='submit') Lưu thiết lập
  #message.mt-3


script(src='https://code.jquery.com/jquery-3.6.0.min.js')
script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js')
script(src='https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.min.js')
script.
  document.getElementById('configForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  const depreciationRate = document.getElementById('depreciationRate').value;
  const heightImg = document.getElementById('heightImg').value;
  const widthImg = document.getElementById('widthImg').value;
  const heightVideo = document.getElementById('heightVideo').value;
  const widthVideo = document.getElementById('widthVideo').value;
  try {
  const response = await axios.post('/user/config/save', {
  depreciationRate: parseFloat(depreciationRate),
  settingSizeImg: {
  height: parseInt(heightImg),
  width: parseInt(widthImg)
  },
  settingSizeVideo: {
  height: parseInt(heightVideo),
  width: parseInt(widthVideo)
  }
  }).then(res => {
    if (res.data.success) {
        document.getElementById('message').innerText = 'Lưu thiết lập thành công!';
        document.getElementById('message').classList.add('alert', 'alert-success');
    } else {
        document.getElementById('message').innerText = 'Lưu thiết lập thất bại!';
        document.getElementById('message').classList.add('alert', 'alert-danger');      
    }
  })
  } catch (error) {
  document.getElementById('message').innerText = 'Lưu thiết lập thất bại!';
  document.getElementById('message').classList.add('alert', 'alert-danger');
  }
  });